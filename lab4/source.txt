(function out (char)
    (asm GETFP 2 ADD LOAD OUT)
)

(function getFP ()
    (return (asm GETFP))
)

(function printInt (int)
    (if ((L int) ">=" 10)
        (call printInt ((L int) "/" 10))
    )
    (call out (((L int) "%" 10) "+" 48))
)

(function newLine ()
    (call out 10)
)

(class Animal ()
    (fields (Animal_name 1))

    (method setName (self name)
        (((L self) "+" Animal_name) "=" (L name))
    )

    (method getName (self)
        (return (L ((L self) "+" Animal_name)))
    )

    (method getType (self)
        (return 1)
    )
)

(class Cat (Animal)
    (fields (Cat_breed 1))


    (method getType (self)
        (return 2)
    )

    (method setBreed (self breed)
        (((L self) "+" Cat_breed) "=" (L breed))
    )

    (method getBreed (self)
        (return (L ((L self) "+" Cat_breed)))
    )
)


(class B ()
  (method ff (self) (return self))
  (method gg (self) (return self))
  (method hh (self) (return self))
  (method kk (self) (return self))
)

(class D (B)
  (method gg (self) (return self))
  (method kk (self) (return self))
)

(class E (D)
  (method gg (self) (return self))
  (method ff (self) (return self))
)

(function main ()
    (block ((animal Animal) (cat Cat))
        (init animal Animal)
        (init cat Cat)

        (mcall animal setName 1501)
        (call printInt (mcall animal getName))
        (call newLine)
        (call printInt (mcall animal getType))
        (call newLine)

        (mcall cat setName 100500)
        (mcall cat setBreed 1007)
        (call printInt (mcall cat getName))
        (call newLine)
        (call printInt (mcall cat getBreed))
        (call newLine)
        (call printInt (mcall cat getType))
        (call newLine)

        (if (not (isinstance animal Animal))
            (call printInt 6661)
            (call newLine)
        )
        (if (not (isinstance cat Animal))
            (call printInt 6662)
            (call newLine)
        )
        (if (isinstance animal Cat)
            (call printInt 6663)
            (call newLine)
        )
        (if (not (isinstance cat Cat))
            (call printInt 6664)
            (call newLine)
        )
    )
    (return 0)
)
